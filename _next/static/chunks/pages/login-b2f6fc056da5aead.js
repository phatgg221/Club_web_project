(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{545:function(e,n,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return o(2888)}])},841:function(e,n,o){"use strict";function a(e){let{src:n,width:o,quality:a}=e;return"https://res.cloudinary.com/demo/image/upload/".concat(["f_auto","c_limit","w_".concat(o),"q_".concat(a||"auto")].join(",")).concat(n)}o.r(n),o.d(n,{default:function(){return a}})},2888:function(e,n,o){"use strict";o.r(n),o.d(n,{default:function(){return h}});var a=o(5893),s=o(144),t=o.n(s),i=o(7294),r=o(9704),l=o.n(r),c=o(4436),d=o(1163),u=o(1664),g=o.n(u),_=o(5675),p=o.n(_);function f(){let e=(0,d.useRouter)(),{login:n,isLoggedIn:o,isAdmin:s,adminLogin:r}=(0,c.a)(),[u,_]=(0,i.useState)(""),[f,m]=(0,i.useState)(""),[h,w]=(0,i.useState)(!1),[j,x]=(0,i.useState)(!1),[L,y]=(0,i.useState)([]);(0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/admin_api"),n=await e.json();y(n)}catch(e){console.log("Error fecthing data: ",e)}})()},[]);let N=async o=>{if(o.preventDefault(),!u||!f){w(!0);return}if("admin"===u){if(f===L.data.mongoData[0].adminPassword){e.push("/admin/dashboard/view"),r();return}x(!0);return}let a=await fetch("/api/login_api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"login",username:u,password:f})});if(a.ok){try{let o=await a.json();console.log("Data:",o.data);let s=l().decode(o.data.token,{complete:!0});console.log("Decoded token:",s.payload.user.id);let t=s.payload.user.id;console.log(u+"username 2"),console.log(JSON.stringify(s.payload.user)+"akjsdnajnc"),t?(console.log("User ID:",t),n(t,u),e.push("/userMain")):console.error("Invalid token structure")}catch(e){console.error("Token verification failed:",e)}console.log("Login successful")}else x(!0),console.log("Login failed")};return(0,a.jsxs)("div",{className:t().mainContainer,children:[(0,a.jsxs)("div",{className:t().brand,children:[(0,a.jsx)(p(),{className:t().loginLogo,src:"/GFCC.png",alt:"GFCC Logo",width:"100",height:"92"}),(0,a.jsxs)("div",{className:t().slogan,children:[(0,a.jsx)("span",{className:t().line,children:"Be Brave."}),(0,a.jsx)("span",{className:t().line,children:"Be Competitive."}),(0,a.jsx)("span",{className:t().line,children:"Be Relentless."})]})]}),(0,a.jsx)("div",{className:t().loginSect,children:(0,a.jsxs)("form",{className:t().loginForm,children:[(0,a.jsx)("input",{type:"text",id:t().username,placeholder:"Username",require:!0,value:u,onChange:e=>_(e.target.value)}),h&&!u&&(0,a.jsx)("p",{style:{color:"red"},children:"Username is required"}),(0,a.jsx)("input",{type:"password",id:t().password,require:"true",placeholder:"Password",value:f,onChange:e=>m(e.target.value)}),(0,a.jsx)(g(),{href:"/resetPassword",children:"Forgot Password?"}),h&&!u&&(0,a.jsx)("p",{style:{color:"red"},children:"Password is required"}),j&&(0,a.jsx)("p",{style:{color:"red"},children:" Wrong username or password"}),(0,a.jsx)("button",{type:"submit",className:t().loginButton,onClick:N,children:"Login"}),(0,a.jsx)("p",{className:t().forgotPasswordLink})]})})]})}function m(){return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(f,{})})}m.hideLayout=!0;var h=m},144:function(e){e.exports={mainContainer:"Login_mainContainer__qBq__",brand:"Login_brand__SBmC2",slogan:"Login_slogan__awCEY",line:"Login_line__Mb40c",loginLogo:"Login_loginLogo__oOGqH",loginForm:"Login_loginForm__09feT",loginButton:"Login_loginButton__TEYoE",forgotPasswordLink:"Login_forgotPasswordLink__CvleM",username:"Login_username__ZqfGo",password:"Login_password__rOq_A"}}},function(e){e.O(0,[675,919,774,888,179],function(){return e(e.s=545)}),_N_E=e.O()}]);