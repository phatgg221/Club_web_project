(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[488],{7495:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/resetPassword",function(){return n(8286)}])},8286:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n(5893),o=n(7294),r=n(7148),s=n.n(r),i=n(1993),_=n.n(i),l=n(4436);n(9704);var d=n(2418),m=n.n(d),c=n(1163);function u(){let[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)(""),[i,d]=(0,o.useState)(""),[u,p]=(0,o.useState)(!1),[b,f]=(0,o.useState)(!1),[w,h]=(0,o.useState)(!1),[g,T]=(0,o.useState)(-1);(0,c.useRouter)();let{userId:F,isLoggedIn:N}=(0,l.a)();(0,o.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/member_api"),n=await e.json();t(n);let a=n.data.mongoData.findIndex(e=>e._id===F);T(a)}catch(e){console.log("Error fecthing data: ",e)}})()},[]);let v=async t=>{if(t.preventDefault(),!n||!i){p(!0);return}let a=e.data.mongoData[g].password;if(!await m().compare(n,a)){f(!0);return}let o=await m().hash(i,10);try{let t=await fetch("/api/member_api?id=".concat(F),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.data.mongoData[g].username,password:o})});if(!t.ok)throw Error("Network response was not ok");window.location.reload();let n=await t.json();n.success?h(!0):console.error(n.message)}catch(e){console.error("There has been a problem with your fetch operation:",e)}};return(0,a.jsxs)("div",{className:"".concat(s().formContainer," ").concat(s().userResetPasswordContainer),children:[(0,a.jsx)("h1",{children:"Reset Your Password"}),(0,a.jsxs)("form",{className:s().form,onSubmit:v,children:[(0,a.jsxs)("div",{className:s().inputGroup,children:[(0,a.jsx)("label",{children:"Your old password"}),(0,a.jsx)("input",{required:!0,type:"password",value:n,onChange:e=>r(e.target.value)})]}),(0,a.jsxs)("div",{className:s().inputGroup,children:[(0,a.jsx)("label",{children:"Your new Password"}),(0,a.jsx)("input",{required:!0,type:"password",value:i,onChange:e=>d(e.target.value)})]}),u&&(0,a.jsx)("p",{className:s().notificationMessage,style:{color:"red"},children:"Please fill in the blank."}),b&&(0,a.jsx)("p",{className:s().notificationMessage,style:{color:"red"},children:"Wrong old password."}),w&&(0,a.jsx)("p",{className:s().notificationMessage,style:{color:"green"},children:"Password successfully updated."}),(0,a.jsx)("div",{className:_().btnBottomDiv,children:(0,a.jsx)("button",{className:"".concat(_().btn," ").concat(_().btnBottom," ").concat(_().btnForm),type:"submit",children:"Change Password"})})]})]})}},7148:function(e){e.exports={formContainer:"Admin_Form_formContainer__woS1p",formContainerTips:"Admin_Form_formContainerTips__EqLt9",userResetPasswordContainer:"Admin_Form_userResetPasswordContainer__8cHa0",formContainerAdminChangePassword:"Admin_Form_formContainerAdminChangePassword__2ZidI",form:"Admin_Form_form__TPPNs",formTips:"Admin_Form_formTips__LsRp0",inputGroup:"Admin_Form_inputGroup__tdFHl",inputGroupTips:"Admin_Form_inputGroupTips__zzKew",Row:"Admin_Form_Row__LVOvY",row:"Admin_Form_row__MxQDQ",organizerInput:"Admin_Form_organizerInput__0pcKt",hideLable:"Admin_Form_hideLable__CrPVN",btnTip:"Admin_Form_btnTip__7GRqP",contentInput:"Admin_Form_contentInput__L_npg",centered:"Admin_Form_centered__GuOUu",notificationMessage:"Admin_Form_notificationMessage__HpZle"}},1993:function(e){e.exports={divTable:"table_divTable__nZy3u",mainTable:"table_mainTable__2ozUS",tableHeading:"table_tableHeading__G1BNY",tableRow:"table_tableRow__OefgE",imageTable:"table_imageTable__8IOsJ",btnTableDiv:"table_btnTableDiv__TZLkB",btn:"table_btn__1oU_a",btnTable:"table_btnTable__M5Q8P",btnBottomDiv:"table_btnBottomDiv__9kcEX",btnBottom:"table_btnBottom__tziMg",btnForm:"table_btnForm__3wNV1"}}},function(e){e.O(0,[919,418,774,888,179],function(){return e(e.s=7495)}),_N_E=e.O()}]);