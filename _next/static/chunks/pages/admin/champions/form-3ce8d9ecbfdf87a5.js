(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[901],{1351:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/champions/form",function(){return n(3026)}])},3026:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n(5893),o=n(7294),i=n(856),r=n.n(i),m=n(1993),_=n.n(m),s=n(7148),c=n.n(s);n(5675);var d=n(1163),p=n(4436);function l(e){let{isUpdate:t,championToUpdate:n,onUpdateSuccess:i,order:m,teamList:s,setTeamList:l,close:u}=e,{isAdmin:b}=(0,p.a)(),h=(0,d.useRouter)(),[f,g]=(0,o.useState)({teamName:"",competitionDescription:"",awardDes:"",images:"",teamOrder:m}),[w,x]=(0,o.useState)("");async function N(e){e.preventDefault();let a=new URLSearchParams,o="";try{let e=document.getElementById("Image").files[0];if(e){let t=new FormData;t.append("file",e),t.append("upload_preset","lzz18aot");let n=await fetch("https://api.cloudinary.com/v1_1/dhjapmqga/image/upload",{method:"POST",body:t});if(!n.ok)throw Error("Failer to upload image.");o=(await n.json()).secure_url}a.append("teamName",f.teamName),a.append("competitionDescription",f.competitionDescription),a.append("awardDes",f.awardDes),o?a.append("images",o):a.append("images",""),console.log("params "+a),console.log("Params "+a);let r=t?"/api/champion_api?id=".concat(n.id):"/api/champion_api";(await fetch(r,{method:t?"PUT":"POST",body:a,headers:{"Content-Type":"application/x-www-form-urlencoded"}})).ok?(console.log("Champion ".concat(t?"updated":"created"," successfully!")),i&&i()):console.error("Failed to ".concat(t?"update":"create"," champion"))}catch(e){console.error("Error ".concat(t?"updating":"creating"," champion:"),e)}}(0,o.useEffect)(()=>{t&&n&&(g({id:n.id||"",teamName:n.name||"",competitionDescription:n.competition||"",awardDes:n.award||"",image:n.image||""}),x(n.images||""))},[t,n,m]);let T=e=>{let{name:t,value:n}=e.target;g({...f,[t]:n})};return(0,o.useEffect)(()=>{b||h.push("/login")},[b,h]),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:r().modal,children:[(0,a.jsx)("p",{className:r().close,onClick:u,children:"\xd7"}),(0,a.jsxs)("div",{className:r().header,style:{fontSize:"30px"},children:[" ",t?"Update":"Add New"," Champion"]}),(0,a.jsx)("div",{className:r().content,children:(0,a.jsxs)("form",{style:{padding:"20px",margin:"auto",width:"100%"},className:c().form,onSubmit:N,children:[(0,a.jsx)("label",{htmlFor:"teamName",children:"Team Name"}),(0,a.jsx)("input",{type:"text",id:"teamName",name:"teamName",placeholder:n?n.teamName:"",value:f.teamName,onChange:T,required:!0}),(0,a.jsx)("br",{}),(0,a.jsx)("label",{htmlFor:"competitionDescription",children:"Competition Description"}),(0,a.jsx)("input",{type:"text",id:"competitionDescription",name:"competitionDescription",placeholder:n?n.competitionDescription:"",value:f.competitionDescription,onChange:T,required:!0}),(0,a.jsx)("br",{}),(0,a.jsx)("label",{htmlFor:"awardDes",children:"Award Description"}),(0,a.jsx)("input",{type:"text",id:"awardDes",name:"awardDes",placeholder:n?n.awardDes:"",value:f.awardDes,onChange:T,required:!0}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("label",{children:"Images"}),(0,a.jsx)("input",{id:"Image",type:"file",name:"images",accept:".jpg, .jpeg, .png",required:!0}),(0,a.jsx)("br",{}),(0,a.jsxs)("button",{style:{marginTop:"5%",marginLeft:"30%"},className:"".concat(_().btn," ").concat(_().btnBottom),type:"submit",children:[t?"Update":"Add","Champion"]})]})})]})})}},7148:function(e){e.exports={formContainer:"Admin_Form_formContainer__woS1p",formContainerTips:"Admin_Form_formContainerTips__EqLt9",userResetPasswordContainer:"Admin_Form_userResetPasswordContainer__8cHa0",formContainerAdminChangePassword:"Admin_Form_formContainerAdminChangePassword__2ZidI",form:"Admin_Form_form__TPPNs",formTips:"Admin_Form_formTips__LsRp0",inputGroup:"Admin_Form_inputGroup__tdFHl",inputGroupTips:"Admin_Form_inputGroupTips__zzKew",Row:"Admin_Form_Row__LVOvY",row:"Admin_Form_row__MxQDQ",organizerInput:"Admin_Form_organizerInput__0pcKt",hideLable:"Admin_Form_hideLable__CrPVN",btnTip:"Admin_Form_btnTip__7GRqP",contentInput:"Admin_Form_contentInput__L_npg",centered:"Admin_Form_centered__GuOUu",notificationMessage:"Admin_Form_notificationMessage__HpZle"}},856:function(e){e.exports={modal:"content_modal__zzFVO",header:"content_header__bkkZB",content:"content_content__ch1N_",actions:"content_actions__S8L9P",close:"content_close__tNO7o",cotentImage:"content_cotentImage__7huai"}},1993:function(e){e.exports={divTable:"table_divTable__nZy3u",mainTable:"table_mainTable__2ozUS",tableHeading:"table_tableHeading__G1BNY",tableRow:"table_tableRow__OefgE",imageTable:"table_imageTable__8IOsJ",btnTableDiv:"table_btnTableDiv__TZLkB",btn:"table_btn__1oU_a",btnTable:"table_btnTable__M5Q8P",btnBottomDiv:"table_btnBottomDiv__9kcEX",btnBottom:"table_btnBottom__tziMg",btnForm:"table_btnForm__3wNV1"}},1163:function(e,t,n){e.exports=n(2937)}},function(e){e.O(0,[675,774,888,179],function(){return e(e.s=1351)}),_N_E=e.O()}]);