(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[548],{7805:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/tips/tips",function(){return n(7610)}])},953:function(e,t,n){"use strict";var a=n(5893),o=n(7294);t.Z=function(e){let{onChange:t,style:n,showButton:s,placeholder:i=""}=e,[r,c]=(0,o.useState)("");return(0,a.jsxs)("form",{className:"search-bar",style:n,onSubmit:e=>{e.preventDefault(),console.log("Searching for: ".concat(r))},children:[(0,a.jsx)("input",{className:"text-box",type:"search",value:r,onChange:e=>{c(e.target.value),t(e.target.value)},placeholder:i}),s&&(0,a.jsx)("button",{className:"submit-btn",type:"submit"})]})}},1398:function(e,t,n){"use strict";var a=n(5893),o=n(7294),s=n(5675),i=n.n(s),r=n(856),c=n.n(r),l=n(7148),d=n.n(l),m=n(1993),_=n.n(m);n(1664),n(6785),t.Z=e=>{let{close:t,content:n,isAdminChangePass:s}=e,[r,l]=(0,o.useState)([]),[m,u]=(0,o.useState)(""),[h,p]=(0,o.useState)(""),[b,f]=(0,o.useState)(!1),[w,x]=(0,o.useState)(!1),[g,j]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/admin_api"),t=await e.json();l(t)}catch(e){console.log("Error fecthing data: ",e)}})()},[]);let N=async e=>{e.preventDefault();let t=r.data.mongoData[0]._id;if(console.log(t+"id"),!m||!h){f(!0);return}if(m!==r.data.mongoData[0].adminPassword){x(!0);return}try{let e=await fetch("/api/admin_api?id=".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminUsername:r.data.mongoData[0].adminUsername,adminPassword:h})});if(!e.ok)throw Error("Network response was not ok");window.location.reload();let n=await e.json();n.success?j(!0):console.error(n.message)}catch(e){console.error("There has been a problem with your fetch operation:",e)}};return s?(0,a.jsx)("div",{className:"".concat(d().formContainer," ").concat(d().formContainerAdminChangePassword),children:(0,a.jsxs)("form",{className:d().form,onSubmit:N,children:[(0,a.jsxs)("div",{className:d().inputGroup,children:[(0,a.jsx)("label",{children:"Your old Password:"}),(0,a.jsx)("input",{required:!0,type:"password",value:m,onChange:e=>u(e.target.value)})]}),(0,a.jsxs)("div",{className:d().inputGroup,children:[(0,a.jsx)("label",{children:"Your new Password:"}),(0,a.jsx)("input",{required:!0,type:"password",value:h,onChange:e=>p(e.target.value)})]}),b&&(0,a.jsx)("p",{className:d().notificationMessage,style:{color:"red"},children:"Please fill in the blank."}),w&&(0,a.jsx)("p",{className:d().notificationMessage,style:{color:"red"},children:"Wrong old password."}),g&&(0,a.jsx)("p",{className:d().notificationMessage,style:{color:"green"},children:"Password successfully updated."}),(0,a.jsx)("div",{className:_().btnBottomDiv,children:(0,a.jsx)("button",{className:"".concat(_().btn," ").concat(_().btnBottom," ").concat(_().btnForm),type:"submit",children:"Change password"})})]})}):(0,a.jsxs)("div",{className:c().modal,children:[(0,a.jsx)("p",{className:c().close,onClick:t,children:"\xd7"}),(0,a.jsx)("div",{className:c().header,children:n.name}),(0,a.jsxs)("div",{className:c().content,children:[(0,a.jsx)("p",{children:n.contents}),(0,a.jsx)("p",{children:(0,a.jsx)(i(),{className:c().cotentImage,src:n.tipImage,alt:"",width:500,height:300,unoptimized:!0})})]})]})}},7610:function(e,t,n){"use strict";n.r(t);var a=n(5893),o=n(7294),s=n(1993),i=n.n(s),r=n(1664),c=n.n(r),l=n(2345),d=n(1398),m=n(953),_=n(4436),u=n(1163);let h=()=>{let[e,t]=(0,o.useState)([]),[n,s]=(0,o.useState)(""),{isAdmin:r}=(0,_.a)(),h=(0,u.useRouter)();(0,o.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/tip_api");if(e.ok){let n=await e.json();t(n)}else console.error("Failed to fetch data")}catch(e){console.error("Error fetching data: ",e)}})()},[]);let p=async e=>{try{(await fetch("/api/tip_api?id=".concat(e._id),{method:"DELETE"})).ok?(console.log("Tip delete successful"),window.location.reload()):console.error("Failed to delete tip")}catch(e){console.error("Error deleting tip",e)}},b=async()=>{window.location.href="/admin/dashboard/view"},f=async()=>{window.location.href="/admin/tips/form"},w=async e=>{console.log("ID to update "+e._id),window.location.href="/admin/tips/form?id=".concat(e._id)},x=e&&e.data&&e.data.mongoData&&e.data.mongoData.filter(e=>e.tipName.toLowerCase().includes(n.toLowerCase()));return(0,o.useEffect)(()=>{r||h.push("/login")},[r,h]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.Z,{showButton:!0,placeholder:"Search for tips",onChange:e=>{s(e)}}),(0,a.jsx)("div",{className:i().divTable,children:(0,a.jsxs)("table",{className:i().mainTable,children:[(0,a.jsx)("thead",{className:i().tableHeading,children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Tip name/ Topic"}),(0,a.jsx)("th",{children:"Link to tip on social media"}),(0,a.jsx)("th",{children:"Tip details"}),(0,a.jsx)("th",{children:"Action"})]})}),(0,a.jsx)("tbody",{children:x&&x.map(e=>(0,a.jsxs)("tr",{className:i().tableRow,children:[(0,a.jsx)("td",{children:e.tipName}),(0,a.jsx)("td",{children:(0,a.jsx)(c(),{href:e.tipsLink,children:"Link"})}),(0,a.jsx)("td",{className:i().btnContainer,children:e.realContent&&e.realContent.map((t,n)=>(0,a.jsx)(l.Z,{modal:!0,trigger:(0,a.jsxs)("button",{className:"".concat(i().btn," ").concat(i().btnTable),children:["Tip ",n+1]}),children:e=>(0,a.jsx)(d.Z,{close:e,className:i().modal,content:t})},"".concat(e._id,"-").concat(n)))}),(0,a.jsx)("td",{className:i().btnContainer,children:(0,a.jsxs)("div",{className:i().btnTableDiv,children:[(0,a.jsx)("button",{className:"".concat(i().btn," ").concat(i().btnTable),onClick:()=>w(e),children:"Update"}),(0,a.jsx)("button",{className:"".concat(i().btn," ").concat(i().btnTable),onClick:()=>p(e),children:"Delete"})]})})]},e._id))})]})}),(0,a.jsxs)("div",{className:i().btnBottomDiv,children:[(0,a.jsx)("button",{className:"".concat(i().btn," ").concat(i().btnBottom),onClick:f,children:"Create"}),(0,a.jsx)("button",{className:"".concat(i().btn," ").concat(i().btnBottom),onClick:b,children:"Return"})]})]})};h.hideLayout=!0,t.default=h},7148:function(e){e.exports={formContainer:"Admin_Form_formContainer__woS1p",formContainerTips:"Admin_Form_formContainerTips__EqLt9",userResetPasswordContainer:"Admin_Form_userResetPasswordContainer__8cHa0",formContainerAdminChangePassword:"Admin_Form_formContainerAdminChangePassword__2ZidI",form:"Admin_Form_form__TPPNs",formTips:"Admin_Form_formTips__LsRp0",inputGroup:"Admin_Form_inputGroup__tdFHl",inputGroupTips:"Admin_Form_inputGroupTips__zzKew",Row:"Admin_Form_Row__LVOvY",row:"Admin_Form_row__MxQDQ",organizerInput:"Admin_Form_organizerInput__0pcKt",hideLable:"Admin_Form_hideLable__CrPVN",btnTip:"Admin_Form_btnTip__7GRqP",contentInput:"Admin_Form_contentInput__L_npg",centered:"Admin_Form_centered__GuOUu",notificationMessage:"Admin_Form_notificationMessage__HpZle"}},856:function(e){e.exports={modal:"content_modal__zzFVO",header:"content_header__bkkZB",content:"content_content__ch1N_",actions:"content_actions__S8L9P",close:"content_close__tNO7o",cotentImage:"content_cotentImage__7huai"}},1993:function(e){e.exports={divTable:"table_divTable__nZy3u",mainTable:"table_mainTable__2ozUS",tableHeading:"table_tableHeading__G1BNY",tableRow:"table_tableRow__OefgE",imageTable:"table_imageTable__8IOsJ",btnTableDiv:"table_btnTableDiv__TZLkB",btn:"table_btn__1oU_a",btnTable:"table_btnTable__M5Q8P",btnBottomDiv:"table_btnBottomDiv__9kcEX",btnBottom:"table_btnBottom__tziMg",btnForm:"table_btnForm__3wNV1"}},1163:function(e,t,n){e.exports=n(2937)}},function(e){e.O(0,[675,345,774,888,179],function(){return e(e.s=7805)}),_N_E=e.O()}]);