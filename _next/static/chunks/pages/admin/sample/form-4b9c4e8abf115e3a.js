(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{348:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/sample/form",function(){return n(4486)}])},4486:function(e,t,n){"use strict";n.r(t);var a=n(5893),o=n(7294),r=n(1163),i=n(7148),s=n.n(i),l=n(1993),m=n.n(l),_=n(4436);let p=()=>{let e=(0,r.useRouter)(),{id:t}=e.query,{isAdmin:n}=(0,_.a)(),[i,l]=(0,o.useState)({sampleName:"",sampleContents:"",sampleAuthor:"",sampleLink:""}),[p,c]=(0,o.useState)(!1),[d,u]=(0,o.useState)(""),[b,h]=(0,o.useState)("");(0,o.useEffect)(()=>{t&&(async()=>{try{c(!0);let e=await fetch("/api/sample_api?id=".concat(t)),n=await e.json();n&&!1===n.error&&200===n.statusCode&&n.data&&n.data.sampleData&&n.data.sampleData.data?l(n.data.sampleData.data):console.error("Data structure is not as expected: ",n)}catch(e){console.error("Error fetching data: ",e)}})()},[t]);let f=e=>{let{name:t,value:n}=e.target;"sampleLink"===t&&(/^(http|https):\/\/.+/.test(n)?(h(""),u("")):(h("Invalid format. Cannot submit."),u("Invalid link format. Requires to start with: http:// or https://"))),l({...i,[e.target.name]:e.target.value})},w=async e=>{if(e.preventDefault(),b){alert("Invalid form. Cannot submit.");return}fetch("/api/sample_api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(e=>{if(!e.ok)throw Error("Network reponse was not ok");return window.location.href="/admin/sample/view",e.json()}).then(e=>console.log("Success: ",e)).catch(e=>console.error("Error",e))},C=async e=>{if(e.preventDefault(),b){alert("Invalid form. Cannot submit.");return}try{if(!(await fetch("/api/sample_api?id=".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).ok)throw Error("Network response was not ok");window.location.href="/admin/sample/view"}catch(e){console.error("Error:",e)}};return(0,o.useEffect)(()=>{n||e.push("/login")},[n,e]),(0,a.jsx)("div",{className:s().formContainer,children:(0,a.jsxs)("form",{className:s().form,onSubmit:w,children:[(0,a.jsxs)("div",{className:s().inputGroup,children:[(0,a.jsx)("label",{children:"Sample name:"}),(0,a.jsx)("input",{required:!0,type:"text",name:"sampleName",placeholder:p?i.sampleName:"",value:i.sampleName,onChange:f})]}),(0,a.jsxs)("div",{className:s().Row,children:[(0,a.jsxs)("div",{className:"".concat(s().inputGroup," ").concat(s().organizerInput),children:[(0,a.jsx)("label",{children:"Contents:"}),(0,a.jsx)("input",{required:!0,type:"text",name:"sampleContents",placeholder:p?i.sampleContents:"",value:i.sampleContents,onChange:f})]}),(0,a.jsxs)("div",{className:s().inputGroup,children:[(0,a.jsx)("label",{children:"Author:"}),(0,a.jsx)("input",{required:!0,type:"text",name:"sampleAuthor",placeholder:p?i.sampleAuthor:"",value:i.sampleAuthor,onChange:f})]})]}),(0,a.jsxs)("div",{className:s().inputGroup,children:[(0,a.jsx)("label",{children:"Link:"}),(0,a.jsx)("input",{required:!0,type:"text",name:"sampleLink",placeholder:p?i.sampleLink:"",value:i.sampleLink,onChange:f}),d&&(0,a.jsx)("p",{className:"error",children:d})]}),(0,a.jsxs)("div",{className:m().btnBottomDiv,children:[(0,a.jsx)("button",{className:"".concat(m().btn," ").concat(m().btnBottom," ").concat(m().btnForm),type:"submit",onClick:p?C:w,children:p?"Update":"Create"}),(0,a.jsxs)("button",{className:"".concat(m().btn," ").concat(m().btnBottom," ").concat(m().btnForm),type:"button",onClick:()=>{window.location.href="/admin/sample/view"},children:[" ","Return"," "]})]})]})})};p.hideLayout=!0,t.default=p},7148:function(e){e.exports={formContainer:"Admin_Form_formContainer__woS1p",formContainerTips:"Admin_Form_formContainerTips__EqLt9",userResetPasswordContainer:"Admin_Form_userResetPasswordContainer__8cHa0",formContainerAdminChangePassword:"Admin_Form_formContainerAdminChangePassword__2ZidI",form:"Admin_Form_form__TPPNs",formTips:"Admin_Form_formTips__LsRp0",inputGroup:"Admin_Form_inputGroup__tdFHl",inputGroupTips:"Admin_Form_inputGroupTips__zzKew",Row:"Admin_Form_Row__LVOvY",row:"Admin_Form_row__MxQDQ",organizerInput:"Admin_Form_organizerInput__0pcKt",hideLable:"Admin_Form_hideLable__CrPVN",btnTip:"Admin_Form_btnTip__7GRqP",contentInput:"Admin_Form_contentInput__L_npg",centered:"Admin_Form_centered__GuOUu",notificationMessage:"Admin_Form_notificationMessage__HpZle"}},1993:function(e){e.exports={divTable:"table_divTable__nZy3u",mainTable:"table_mainTable__2ozUS",tableHeading:"table_tableHeading__G1BNY",tableRow:"table_tableRow__OefgE",imageTable:"table_imageTable__8IOsJ",btnTableDiv:"table_btnTableDiv__TZLkB",btn:"table_btn__1oU_a",btnTable:"table_btnTable__M5Q8P",btnBottomDiv:"table_btnBottomDiv__9kcEX",btnBottom:"table_btnBottom__tziMg",btnForm:"table_btnForm__3wNV1"}},1163:function(e,t,n){e.exports=n(2937)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=348)}),_N_E=e.O()}]);