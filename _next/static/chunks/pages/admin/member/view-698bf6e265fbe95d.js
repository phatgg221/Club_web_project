(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[614],{9440:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/member/view",function(){return n(1961)}])},1961:function(e,t,n){"use strict";n.r(t);var a=n(5893),o=n(7294),r=n(1993),s=n.n(r),i=n(2345),l=n(7148),c=n.n(l),m=n(1163),_=n(4436);let d=()=>{let e=(0,m.useRouter)(),{isAdmin:t}=(0,_.a)(),[n,r]=(0,o.useState)(""),[l,d]=(0,o.useState)(""),[b,u]=(0,o.useState)([]),[h,p]=(0,o.useState)(!1),[f,w]=(0,o.useState)({username:"",password:"1"}),g=()=>p(!1);(0,o.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/member_api"),t=await e.json();u(t)}catch(e){console.log("Error fetching data: ",e)}})()},[]);let x=async e=>{try{(await fetch("/api/member_api?=".concat(e),{method:"DELETE"})).ok?(console.log("Member delete successful"),window.location.reload()):console.error("Failed to delete member")}catch(e){console.error("Error deleting member",e)}},T=async()=>{window.location.href="/admin/dashboard/view"},j=async()=>{if(b.data.mongoData.some(e=>e.username===f.username)){alert("Account already exists.");return}if(l){alert("Invalid form. Cannot submit.");return}fetch("/api/member_api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}).then(e=>{if(!e.ok)throw Error("Network response was not ok");return g(),e.json()}).then(e=>console.log("Success: ",e)).catch(e=>console.error("Error",e))};return(0,o.useEffect)(()=>{t||e.push("/login")},[t,e]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{open:h,closeOnDocumentClick:!0,onClose:j,children:(0,a.jsxs)("form",{style:{backgroundColor:"white",padding:"20px",border:"solid",borderColor:"gray"},className:c().form,onSubmit:j,children:[(0,a.jsxs)("label",{children:["Username:",(0,a.jsx)("input",{name:"username",required:!0,type:"text",onChange:e=>{let{name:t,value:n}=e.target;"username"===t&&(/^[sS]\d{7}$/.test(n)?(d(""),r("")):(d("Invalid format. Cannot submit."),r('Invalid username. Required format: "sXXXXXXX" or "SXXXXXXX"'))),w({...f,[t]:n})}}),n&&(0,a.jsx)("p",{className:"error",children:n})]}),(0,a.jsx)("label",{children:"Password: The password will be 1 as default. Member can change it later."}),(0,a.jsx)("button",{className:"".concat(s().btn," ").concat(s().btnForm),type:"submit",children:"Create Account"})]})}),(0,a.jsx)("div",{className:s().divTable,children:(0,a.jsxs)("table",{className:s().mainTable,children:[(0,a.jsx)("thead",{className:s().tableHeading,children:(0,a.jsxs)("tr",{className:s().tableRow,children:[(0,a.jsx)("th",{children:"Username"}),(0,a.jsx)("th",{children:"Password"}),(0,a.jsx)("th",{children:"Action"})]})}),(0,a.jsx)("tbody",{children:b&&b.data&&b.data.mongoData&&b.data.mongoData.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.username}),(0,a.jsx)("td",{children:e.password}),(0,a.jsx)("td",{className:s().btnContainer,children:(0,a.jsx)("button",{className:"".concat(s().btn," ").concat(s().btnTable),onClick:()=>x(e._id),children:"Delete"})})]},t))})]})}),(0,a.jsxs)("div",{className:s().btnBottomDiv,children:[(0,a.jsx)("button",{className:"".concat(s().btn," ").concat(s().btnBottom),onClick:()=>p(!0),children:"Create a new account"}),(0,a.jsx)("button",{className:"".concat(s().btn," ").concat(s().btnBottom),onClick:T,children:"Return to dashboard"})]})]})};d.hideLayout=!0,t.default=d},7148:function(e){e.exports={formContainer:"Admin_Form_formContainer__woS1p",formContainerTips:"Admin_Form_formContainerTips__EqLt9",userResetPasswordContainer:"Admin_Form_userResetPasswordContainer__8cHa0",formContainerAdminChangePassword:"Admin_Form_formContainerAdminChangePassword__2ZidI",form:"Admin_Form_form__TPPNs",formTips:"Admin_Form_formTips__LsRp0",inputGroup:"Admin_Form_inputGroup__tdFHl",inputGroupTips:"Admin_Form_inputGroupTips__zzKew",Row:"Admin_Form_Row__LVOvY",row:"Admin_Form_row__MxQDQ",organizerInput:"Admin_Form_organizerInput__0pcKt",hideLable:"Admin_Form_hideLable__CrPVN",btnTip:"Admin_Form_btnTip__7GRqP",contentInput:"Admin_Form_contentInput__L_npg",centered:"Admin_Form_centered__GuOUu",notificationMessage:"Admin_Form_notificationMessage__HpZle"}},1993:function(e){e.exports={divTable:"table_divTable__nZy3u",mainTable:"table_mainTable__2ozUS",tableHeading:"table_tableHeading__G1BNY",tableRow:"table_tableRow__OefgE",imageTable:"table_imageTable__8IOsJ",btnTableDiv:"table_btnTableDiv__TZLkB",btn:"table_btn__1oU_a",btnTable:"table_btnTable__M5Q8P",btnBottomDiv:"table_btnBottomDiv__9kcEX",btnBottom:"table_btnBottom__tziMg",btnForm:"table_btnForm__3wNV1"}},1163:function(e,t,n){e.exports=n(2937)}},function(e){e.O(0,[345,774,888,179],function(){return e(e.s=9440)}),_N_E=e.O()}]);