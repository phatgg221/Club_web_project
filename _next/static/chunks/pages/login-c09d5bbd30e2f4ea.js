(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{545:function(e,n,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return o(2888)}])},2888:function(e,n,o){"use strict";o.r(n),o.d(n,{default:function(){return f}});var s=o(5893),a=o(144),i=o.n(a),r=o(7294),t=o(9704),l=o.n(t),c=o(4436),d=o(1163),u=o(1664),g=o.n(u),_=o(5675),p=o.n(_);function h(){let e=(0,d.useRouter)(),{login:n,isLoggedIn:o,isAdmin:a,adminLogin:t}=(0,c.a)(),[u,_]=(0,r.useState)(""),[h,m]=(0,r.useState)(""),[f,w]=(0,r.useState)(!1),[j,x]=(0,r.useState)(!1),[L,y]=(0,r.useState)([]);(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/admin_api"),n=await e.json();y(n)}catch(e){console.log("Error fecthing data: ",e)}})()},[]);let N=async o=>{if(o.preventDefault(),!u||!h){w(!0);return}if("admin"===u){if(h===L.data.mongoData[0].adminPassword){e.push("/admin/dashboard/view"),t();return}x(!0);return}let s=await fetch("/api/login_api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"login",username:u,password:h})});if(s.ok){try{let o=await s.json();console.log("Data:",o.data);let a=l().decode(o.data.token,{complete:!0});console.log("Decoded token:",a.payload.user.id);let i=a.payload.user.id;console.log(u+"username 2"),console.log(JSON.stringify(a.payload.user)+"akjsdnajnc"),i?(console.log("User ID:",i),n(i,u),e.push("/userMain")):console.error("Invalid token structure")}catch(e){console.error("Token verification failed:",e)}console.log("Login successful")}else x(!0),console.log("Login failed")};return(0,s.jsxs)("div",{className:i().mainContainer,children:[(0,s.jsxs)("div",{className:i().brand,children:[(0,s.jsx)(p(),{className:i().loginLogo,src:"/GFCC.png",alt:"GFCC Logo",width:"100",height:"92"}),(0,s.jsxs)("div",{className:i().slogan,children:[(0,s.jsx)("span",{className:i().line,children:"Be Brave."}),(0,s.jsx)("span",{className:i().line,children:"Be Competitive."}),(0,s.jsx)("span",{className:i().line,children:"Be Relentless."})]})]}),(0,s.jsx)("div",{className:i().loginSect,children:(0,s.jsxs)("form",{className:i().loginForm,children:[(0,s.jsx)("input",{type:"text",id:i().username,placeholder:"Username",require:!0,value:u,onChange:e=>_(e.target.value)}),f&&!u&&(0,s.jsx)("p",{style:{color:"red"},children:"Username is required"}),(0,s.jsx)("input",{type:"password",id:i().password,require:"true",placeholder:"Password",value:h,onChange:e=>m(e.target.value)}),(0,s.jsx)(g(),{href:"/resetPassword",children:"Forgot Password?"}),f&&!u&&(0,s.jsx)("p",{style:{color:"red"},children:"Password is required"}),j&&(0,s.jsx)("p",{style:{color:"red"},children:" Wrong username or password"}),(0,s.jsx)("button",{type:"submit",className:i().loginButton,onClick:N,children:"Login"}),(0,s.jsx)("p",{className:i().forgotPasswordLink})]})})]})}function m(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(h,{})})}m.hideLayout=!0;var f=m},144:function(e){e.exports={mainContainer:"Login_mainContainer__qBq__",brand:"Login_brand__SBmC2",slogan:"Login_slogan__awCEY",line:"Login_line__Mb40c",loginLogo:"Login_loginLogo__oOGqH",loginForm:"Login_loginForm__09feT",loginButton:"Login_loginButton__TEYoE",forgotPasswordLink:"Login_forgotPasswordLink__CvleM",username:"Login_username__ZqfGo",password:"Login_password__rOq_A"}}},function(e){e.O(0,[675,919,774,888,179],function(){return e(e.s=545)}),_N_E=e.O()}]);