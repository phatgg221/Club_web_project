(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[214],{347:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/competitions",function(){return s(2049)}])},953:function(e,t,s){"use strict";var a=s(5893),n=s(7294);t.Z=function(e){let{onChange:t,style:s,showButton:i,placeholder:r=""}=e,[c,l]=(0,n.useState)("");return(0,a.jsxs)("form",{className:"search-bar",style:s,onSubmit:e=>{e.preventDefault(),console.log("Searching for: ".concat(c))},children:[(0,a.jsx)("input",{className:"text-box",type:"search",value:c,onChange:e=>{l(e.target.value),t(e.target.value)},placeholder:r}),i&&(0,a.jsx)("button",{className:"submit-btn",type:"submit"})]})}},2049:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(5893),n=s(953),i=s(7294),r=function(e){let{categories:t,name:s,onChange:n}=e,[r,c]=(0,i.useState)(Array(t.length).fill(!1)),l=(e,s)=>{let a=[...r];a[s]=!a[s],e.target.checked?n(t[s]):n(""),c(a)};return(0,a.jsxs)("form",{className:"filter-box",children:[(0,a.jsx)("span",{className:"filter-box-title",children:s}),(0,a.jsx)("div",{className:"btn-div",children:t.map((e,t)=>(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",className:"filter-box-checkbox",checked:r[t],onChange:e=>l(e,t)}),e]},e))})]})};function c(){let[e,t]=(0,i.useState)("false"),[s,c]=(0,i.useState)(!1),[l,o]=(0,i.useState)(!1),[d,h]=(0,i.useState)([]),[u,m]=(0,i.useState)(""),[f,x]=(0,i.useState)(""),g=()=>{c(window.matchMedia("(min-width: 490px)").matches),o(window.matchMedia("(max-width: 490px)").matches)},p=[];if(d.data&&d.data.mongoData)for(let e=0;e<=d.data.mongoData.length-1;e++){let t=d.data.mongoData[e].organizer;p.includes(t)||p.push(t)}console.log(p.length+" categories found."),(0,i.useEffect)(()=>(g(),window.addEventListener("resize",g),()=>{window.removeEventListener("resize",g)}),[]);let v=e=>{x(e)};(0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/card_api"),t=await e.json();h(t)}catch(e){console.log("Error fetching data: ",e)}})()},[]);let j=()=>{var e,t,s;return(null!==(s=null===(t=d.data)||void 0===t?void 0:null===(e=t.mongoData)||void 0===e?void 0:e.filter(e=>{let t=!u||e.competitionName.toLowerCase().includes(u.toLowerCase()),s=!f||e.organizer.toLowerCase().includes(f.toLowerCase());return t&&s}))&&void 0!==s?s:[]).map((e,t)=>(0,a.jsxs)("div",{className:"sample-content",children:[e.competitionName," - ",e.organizer]},t))};return(0,a.jsxs)("div",{className:"main-search",children:[(0,a.jsx)("h1",{children:"On-going Competitions"}),(0,a.jsxs)("div",{className:"search-container",children:[(0,a.jsxs)("div",{className:"search-bar-sect",children:[(0,a.jsx)(n.Z,{showButton:!0,placeholder:"Search for Competitions",onChange:e=>{m(e)}}),(0,a.jsx)("img",{className:"filter-icon",src:"./dropdown.png",width:"30",height:"30",onClick:()=>t("true"===e?"false":"true")})]}),(0,a.jsxs)("div",{datavisible:e,className:"filter-sect",children:[(0,a.jsxs)("div",{className:"filter-sect-title",children:[(0,a.jsx)("h2",{children:"Filters"}),(0,a.jsx)("span",{children:"clear all filters"})]}),(0,a.jsxs)("div",{className:"filter-sect-container",children:[(0,a.jsx)("div",{className:"filter-sect-boxes",children:(0,a.jsx)(r,{categories:p,name:"By organizer",onChange:v})}),(0,a.jsxs)("div",{className:"filter-sect-search",children:[(0,a.jsx)(n.Z,{style:{width:"100%"},placeholder:"Filter by Organizer",onChange:v}),s&&(0,a.jsx)("div",{className:"competition-list",children:j()})]})]})]}),l&&(0,a.jsx)("div",{className:"competition-list",children:j()})]})]})}var l=s(1163),o=s(4436),d=function(){let e=(0,l.useRouter)(),{isLoggedIn:t}=(0,o.a)();return(0,i.useEffect)(()=>{t||e.push("/login")},[t,e]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(c,{})})}},1163:function(e,t,s){e.exports=s(2937)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=347)}),_N_E=e.O()}]);