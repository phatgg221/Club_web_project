(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[214],{347:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/competitions",function(){return s(2049)}])},953:function(e,t,s){"use strict";var a=s(5893),n=s(7294);t.Z=function(e){let{onChange:t,style:s,showButton:i,placeholder:r=""}=e,[c,l]=(0,n.useState)("");return(0,a.jsxs)("form",{className:"search-bar",style:s,onSubmit:e=>{e.preventDefault(),console.log("Searching for: ".concat(c))},children:[(0,a.jsx)("input",{className:"text-box",type:"search",value:c,onChange:e=>{l(e.target.value),t(e.target.value)},placeholder:r}),i&&(0,a.jsx)("button",{className:"submit-btn",type:"submit"})]})}},2049:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var a=s(5893),n=s(953),i=s(7294),r=function(e){let{categories:t,name:s,onChange:n}=e,[r,c]=(0,i.useState)(Array(t.length).fill(!1)),l=(e,s)=>{let a=[...r];a[s]=!a[s],e.target.checked?n(t[s]):n(""),c(a)};return(0,a.jsxs)("form",{className:"filter-box",children:[(0,a.jsx)("span",{className:"filter-box-title",children:s}),(0,a.jsx)("div",{className:"btn-div",children:t.map((e,t)=>(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",className:"filter-box-checkbox",checked:r[t],onChange:e=>l(e,t)}),e]},e))})]})},c=s(5675),l=s.n(c);function o(){let[e,t]=(0,i.useState)("false"),[s,c]=(0,i.useState)(!1),[o,d]=(0,i.useState)(!1),[h,u]=(0,i.useState)([]),[m,f]=(0,i.useState)(""),[x,p]=(0,i.useState)(""),g=()=>{c(window.matchMedia("(min-width: 490px)").matches),d(window.matchMedia("(max-width: 490px)").matches)},v=[];if(h.data&&h.data.mongoData)for(let e=0;e<=h.data.mongoData.length-1;e++){let t=h.data.mongoData[e].organizer;v.includes(t)||v.push(t)}console.log(v.length+" categories found."),(0,i.useEffect)(()=>(g(),window.addEventListener("resize",g),()=>{window.removeEventListener("resize",g)}),[]);let j=e=>{p(e)};(0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/card_api"),t=await e.json();u(t)}catch(e){console.log("Error fetching data: ",e)}})()},[]);let w=()=>{var e,t,s;return(null!==(s=null===(t=h.data)||void 0===t?void 0:null===(e=t.mongoData)||void 0===e?void 0:e.filter(e=>{let t=!m||e.competitionName.toLowerCase().includes(m.toLowerCase()),s=!x||e.organizer.toLowerCase().includes(x.toLowerCase());return t&&s}))&&void 0!==s?s:[]).map((e,t)=>(0,a.jsxs)("div",{className:"sample-content",children:[e.competitionName," - ",e.organizer]},t))};return(0,a.jsxs)("div",{className:"main-search",children:[(0,a.jsx)("h1",{children:"On-going Competitions"}),(0,a.jsxs)("div",{className:"search-container",children:[(0,a.jsxs)("div",{className:"search-bar-sect",children:[(0,a.jsx)(n.Z,{showButton:!0,placeholder:"Search for Competitions",onChange:e=>{f(e)}}),(0,a.jsx)(l(),{className:"filter-icon",src:"/dropdown.png",width:"30",height:"30",alt:"picture",onClick:()=>t("true"===e?"false":"true")})]}),(0,a.jsxs)("div",{datavisible:e,className:"filter-sect",children:[(0,a.jsxs)("div",{className:"filter-sect-title",children:[(0,a.jsx)("h2",{children:"Filters"}),(0,a.jsx)("span",{children:"clear all filters"})]}),(0,a.jsxs)("div",{className:"filter-sect-container",children:[(0,a.jsx)("div",{className:"filter-sect-boxes",children:(0,a.jsx)(r,{categories:v,name:"By organizer",onChange:j})}),(0,a.jsxs)("div",{className:"filter-sect-search",children:[(0,a.jsx)(n.Z,{style:{width:"100%"},placeholder:"Filter by Organizer",onChange:j}),s&&(0,a.jsx)("div",{className:"competition-list",children:w()})]})]})]}),o&&(0,a.jsx)("div",{className:"competition-list",children:w()})]})]})}var d=s(1163),h=s(4436),u=function(){let e=(0,d.useRouter)(),{isLoggedIn:t}=(0,h.a)();return(0,i.useEffect)(()=>{t||e.push("/login")},[t,e]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(o,{})})}},1163:function(e,t,s){e.exports=s(2937)}},function(e){e.O(0,[675,774,888,179],function(){return e(e.s=347)}),_N_E=e.O()}]);